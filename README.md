# 五子棋在线对战系统

这是一个基于Node.js和Socket.IO开发的在线五子棋对战系统，支持多房间、实时对战、观战和聊天功能。

## 功能特点

- **用户系统**：支持用户登录和会话恢复
- **房间系统**：
  - 创建公开/私密房间
  - 密码保护
  - 房主控制
  - 房间列表浏览
- **游戏功能**：
  - 实时五子棋对战
  - 黑白棋随机分配
  - 胜负判定
  - 超时检测（5分钟）
  - 游戏重置
- **观战系统**：
  - 支持多人同时观战
  - 观众可在有空位时成为玩家
- **聊天系统**：
  - 房间内实时聊天
  - 聊天历史记录保存
- **战绩记录**：
  - 完整对局自动保存战绩
  - 包含棋盘状态、玩家信息、聊天记录等

## 技术栈

- **后端**：Node.js, Express, Socket.IO
- **前端**：HTML, CSS, JavaScript
- **数据存储**：文件系统（JSON）

## 安装与运行

### 前提条件

- Node.js (v12+)
- npm

### 安装步骤

1. 克隆仓库
```bash
git clone <仓库地址>
cd <项目文件夹>
```

2. 安装依赖
```bash
npm install
```

3. 启动服务器
```bash
node server.js
```

4. 访问应用
在浏览器中打开 `http://localhost:3000`

## 项目结构

```
/
├── public/              # 前端静态文件
│   ├── index.html       # 登录页面
│   ├── lobby.html       # 大厅页面
│   ├── game.html        # 游戏页面
│   ├── css/             # 样式文件
│   └── js/              # 前端JavaScript
├── data/                # 数据存储目录
│   ├── rooms.json       # 房间数据
│   ├── users.json       # 用户数据
│   └── records/         # 对局记录
├── server.js            # 服务器主文件
├── package.json         # 项目配置
└── README.md            # 项目说明
```

## 使用说明

1. **登录**：输入用户名进入系统
2. **创建房间**：在大厅页面点击"创建房间"，设置房间名称和是否私密
3. **加入房间**：在房间列表中点击房间加入，私密房间需要输入密码
4. **游戏操作**：
   - 等待两名玩家加入后自动开始游戏
   - 黑棋先行，点击棋盘放置棋子
   - 连成五子即获胜
5. **聊天**：在游戏页面下方输入框发送消息
6. **观战**：当房间已有两名玩家时，新加入的用户自动成为观众
7. **成为玩家**：当有玩家离开时，观众可以点击"成为玩家"按钮加入游戏

## 数据持久化

- 所有房间和用户数据保存在data目录下的JSON文件中
- 完整的对局记录（包含聊天历史）保存在data/records目录下

## 注意事项

- 玩家超过5分钟不下棋将被判定为超时，对方获胜
- 当房间内没有任何人时，房间将被自动删除
- 对局完整结束后（有胜负结果），战绩将被自动保存

## 许可证

[MIT](LICENSE)